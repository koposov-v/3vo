# Микросервисный API проект

Этот проект представляет собой микросервисный API, состоящий из четырёх сервисов: API Gateway, Order Service, Kitchen Service и Auth Service. Система предназначена для управления заказами в гипотетическом ресторанном приложении. Каждый сервис упакован в Docker-контейнер и оркестрируется с помощью Docker Compose.

## Описание сервисов

- **API Gateway**: Предоставляет REST API для клиентов (мобильное приложение, веб-сайт). Отвечает за аутентификацию пользователей, создание, получение, обновление и отмену заказов. Взаимодействует с Order Service через gRPC.
- **Order Service**: Обрабатывает и хранит заказы. Предоставляет gRPC API для взаимодействия с API Gateway и взаимодействует с Kitchen Service через gRPC. Хранит данные в памяти или в PostgreSQL (на усмотрение разработчика).
- **Kitchen Service**: Управляет очередью заказов для приготовления. Предоставляет gRPC API для взаимодействия с Order Service. Отслеживает статусы приготовления и каждые 10 секунд обновляет статус заказа, отправляя изменения в Order Service через gRPC.
- **Auth Service**: Хранит данные пользователей, позволяет регистрировать новых пользователей и выдавать/проверять JWT-токены.

## Жизненный цикл заказа

1. **Регистрация пользователя**: Создайте пользователя через Auth Service с помощью эндпоинта `POST /api/v1/register`. Подробности можно посмотреть в Swagger-документации.
2. **Авторизация**: Выполните вход через API Gateway с помощью эндпоинта `POST /login`, чтобы получить JWT-токен.
3. **Создание заказа**: Создайте заказ через API Gateway с помощью эндпоинта `POST /order`. Не забудьте добавить JWT-токен в заголовки запроса (Authorization: Bearer <token>).
4. **Отслеживание статуса**: Наблюдайте за статусом заказа через эндпоинт `GET /order`. JWT-токен также требуется в заголовках.
5. **Логи**: Все этапы обработки заказа (создание, обновление статуса, отмена) отображаются в логах сервисов.
6. **Обновление/отмена заказа**: Используйте соответствующие эндпоинты API Gateway (`PUT/DELETE /order` для обновления, `DELETE /api/v1/order` для отмены). JWT-токен обязателен.

## Требования

Для запуска проекта необходимо установить следующие утилиты:
- **Docker**: Для контейнеризации сервисов.
- **Docker Compose**: Для оркестрации контейнеров.
- **Taskfile**: Для выполнения команд сборки и запуска проекта. Установите утилиту Taskfile, следуя инструкциям на [официальном сайте Task](https://taskfile.dev/installation/).

## Запуск проекта

1. **Сборка проекта**:
   ```bash
   task build
   ```
   Эта команда собирает Docker-образы для всех сервисов.

2. **Запуск проекта**:
   ```bash
   task up
   ```
   Эта команда поднимает все сервисы с помощью Docker Compose.

## Примечания

- Для взаимодействия с API Gateway используйте JWT-токен, полученный при авторизации, во всех запросах, связанных с заказами.
- Логи сервисов содержат информацию о всех этапах обработки заказов, что удобно для отладки.
- Документацию API можно найти в Swagger (для Auth Service и API Gateway (не успел :) ).